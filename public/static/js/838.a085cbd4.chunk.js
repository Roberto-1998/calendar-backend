"use strict";(self.webpackChunkcalendar=self.webpackChunkcalendar||[]).push([[838],{1925:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(9439),a=t(2791),o=t(9434),s=t(2474),c=t(7689),u=t(4165),i=t(5861),l=t(1413),f=t(2426),d=t.n(f),p=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{end:d()(e.end).toDate(),start:d()(e.start).toDate()})}))},v=t(1243),m=t(1830),h=t.n(m),x="".concat("https://calendar-backend-sage.vercel.app/api","/events"),g=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(n){var t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"x-token":localStorage.getItem("token")||""}},e.prev=1,e.next=4,v.Z.post("".concat(x),n,t);case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(){var n,t,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"x-token":localStorage.getItem("token")||""}},e.prev=1,e.next=4,v.Z.get("".concat(x),n);case 4:return t=e.sent,r=t.data,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(n){var t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"x-token":localStorage.getItem("token")||""}},e.prev=1,e.next=4,v.Z.put("".concat(x,"/").concat(n.id),n,t);case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),h().fire("Error",e.t0.response.data.msg,"error");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(n){var t,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"x-token":localStorage.getItem("token")||""}},e.prev=1,e.next=4,v.Z.delete("".concat(x,"/").concat(n.id),t);case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),h().fire("Error",e.t0.response.data.msg,"error");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}(),k=t(1397),y=function(e){return function(n){n((0,k.Z7)(e))}},w=function(e){return function(n){n((0,k.g8)(e))}},N=function(){return function(e){e((0,k.cy)())}},S=t(184),C=function(){var e=(0,o.v9)((function(e){return e.auth})).user,n=(0,o.I0)(),t=(0,c.s0)();return(0,S.jsxs)("div",{className:"navbar navbar-dark bg-dark mb-4 pr-4 px-3",children:[(0,S.jsx)("span",{className:"navbar-brand",children:e.name}),(0,S.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){n((0,s.TX)()),n((function(e){e((0,k.ji)())})),t("/login")},children:[(0,S.jsx)("i",{className:"fas fa-sign-out-alt"}),(0,S.jsx)("span",{children:" Salir"})]})]})},E=t(7969),I={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},D=(t(5098),t(5852),function(e){var n=e.event,t=n.title,r=n.user;return(0,S.jsxs)("div",{children:[(0,S.jsx)("strong",{children:t}),(0,S.jsxs)("span",{children:["- ",r.name]})]})}),V=t(4942),A=t(3897),H=t(7948),T=t.n(H),F=t(8314),R=function(){return function(e){e((0,F.l_)())}},q=function(){return function(e){e((0,F.i3)())}},M={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};T().setAppElement("#root");var O=d()().minutes(0).seconds(0).add(1,"hours"),_=O.clone().add(1,"hours"),G={title:"",notes:"",start:O.toDate(),end:_.toDate()},z=function(){var e=(0,a.useState)(O.toDate()),n=(0,r.Z)(e,2),t=n[0],s=n[1],c=(0,a.useState)(_.toDate()),f=(0,r.Z)(c,2),p=f[0],v=f[1],m=(0,a.useState)(!0),x=(0,r.Z)(m,2),Z=x[0],j=x[1],y=(0,o.I0)(),C=(0,o.v9)((function(e){return e.events})).activeEvent,E=(0,o.v9)((function(e){return e.ui})).modalOpen,I=(0,a.useState)(G),D=(0,r.Z)(I,2),H=D[0],F=D[1];(0,a.useEffect)((function(){F(C||G)}),[C]);var q=function(){y(R()),y(N()),F(G)},z=H.title,B=H.notes,L=H.start,P=H.end,U=function(e){var n=e.target;F((0,l.Z)((0,l.Z)({},H),{},(0,V.Z)({},n.name,n.value)))};return(0,S.jsxs)(T(),{isOpen:E,style:M,onRequestClose:q,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo",children:[(0,S.jsxs)("h1",{children:[" ",C?"Editar evento":"Nuevo evento"," "]}),(0,S.jsx)("hr",{}),(0,S.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault();var n,t=d()(L),r=d()(P);if(t.isSameOrAfter(r))return h().fire("Error","La fecha fin debe ser mayor que la fecha de inicio","error");z.trim().length<2?j(!1):(C?(console.log("Holiwis"),y((n=H,function(){var e=(0,i.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(n);case 2:e.sent.ok&&t((0,k.Cn)(n));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))):y(function(e){return function(){var n=(0,i.Z)((0,u.Z)().mark((function n(t,r){var a,o,s,c,i;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r(),o=a.auth.user,s=o.uid,c=o.name,n.next=4,g(e);case 4:(i=n.sent).ok&&(e.id=i.event.id,e.user={_id:s,name:c},t(w(e)));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(H)),j(!0),q())},children:[(0,S.jsxs)("div",{className:"form-group mb-2",children:[(0,S.jsx)("label",{children:"Fecha y hora inicio"}),(0,S.jsx)(A.Z,{className:"form-control",onChange:function(e){s(e),F((0,l.Z)((0,l.Z)({},H),{},{start:e}))},value:t})]}),(0,S.jsxs)("div",{className:"form-group mb-2",children:[(0,S.jsx)("label",{children:"Fecha y hora fin"}),(0,S.jsx)(A.Z,{className:"form-control",onChange:function(e){v(e),F((0,l.Z)((0,l.Z)({},H),{},{end:e}))},value:p,minDate:t})]}),(0,S.jsx)("hr",{}),(0,S.jsxs)("div",{className:"form-group mb-2",children:[(0,S.jsx)("label",{children:"Titulo y notas"}),(0,S.jsx)("input",{type:"text",className:"form-control ".concat(Z?"is-valid":"is-invalid"),placeholder:"T\xedtulo del evento",name:"title",autoComplete:"off",value:z,onChange:U}),(0,S.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),(0,S.jsxs)("div",{className:"form-group mb-2",children:[(0,S.jsx)("textarea",{type:"text",className:"form-control",placeholder:"Notas",rows:"5",name:"notes",value:B,onChange:U}),(0,S.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Informaci\xf3n adicional"})]}),(0,S.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[(0,S.jsx)("i",{className:"far fa-save"}),(0,S.jsx)("span",{children:" Guardar"})]})]})]})},B=function(){var e=(0,o.I0)();return(0,S.jsx)("button",{className:"btn btn-primary fab",onClick:function(){e(q())},children:(0,S.jsx)("i",{className:"fas fa-plus"})})},L=function(){var e=(0,o.I0)();return(0,S.jsxs)("button",{className:"btn btn-danger fab-danger",onClick:function(){e(function(){var e=(0,i.Z)((0,u.Z)().mark((function e(n,t){var r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),a=r.events.activeEvent,e.next=3,j(a);case 3:e.sent.ok&&n((0,k.gV)());case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())},children:[(0,S.jsx)("i",{className:"fas fa-trash"}),(0,S.jsx)("span",{children:"Borrar evento"})]})};d().locale("es");var P=(0,E.Zt)(d()),U=function(){var e=(0,a.useState)(localStorage.getItem("lastView")||"month"),n=(0,r.Z)(e,2),t=n[0],s=n[1],c=(0,o.I0)(),l=(0,o.v9)((function(e){return e.auth})).user,f=(0,o.v9)((function(e){return e.events})),d=f.events,v=f.activeEvent;(0,a.useEffect)((function(){c(function(){var e=(0,i.Z)((0,u.Z)().mark((function e(n){var t,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:(t=e.sent).ok&&(r=p(t.events),n((0,k.qV)(r)));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[c]);return(0,S.jsxs)("div",{className:"calendar-screen",children:[(0,S.jsx)(C,{}),(0,S.jsx)(E.f,{eventPropGetter:function(e,n,t,r){return{style:{backgroundColor:l.uid===e.user._id?"#367CF7":"#465660",borderRadius:"0px",opacity:.8,display:"block",color:"white"}}},messages:I,localizer:P,events:d,startAccesor:"start",endAccesor:"end",onDoubleClickEvent:function(e){c(y(e)),c(q())},onSelectEvent:function(e){c(R()),c(y(e))},onView:function(e){s(e),localStorage.setItem("lastView",e)},view:t,onSelectSlot:function(){c(N())},selectable:!0,components:{event:D}}),v&&(0,S.jsx)(L,{}),(0,S.jsx)(B,{}),(0,S.jsx)(z,{})]})}}}]);
//# sourceMappingURL=838.a085cbd4.chunk.js.map